{
    "org": {
        "sql": "SELECT spree_inventory_units.id AS t0_r0, spree_inventory_units.state AS t0_r1, spree_inventory_units.variant_id AS t0_r2, spree_inventory_units.order_id AS t0_r3, spree_inventory_units.shipment_id AS t0_r4, spree_inventory_units.created_at AS t0_r5, spree_inventory_units.updated_at AS t0_r6, spree_inventory_units.pending AS t0_r7, spree_inventory_units.line_item_id AS t0_r8, spree_inventory_units.quantity AS t0_r9, spree_inventory_units.original_return_item_id AS t0_r10, spree_shipments.id AS t1_r0, spree_shipments.tracking AS t1_r1, spree_shipments.number AS t1_r2, spree_shipments.cost AS t1_r3, spree_shipments.shipped_at AS t1_r4, spree_shipments.order_id AS t1_r5, spree_shipments.address_id AS t1_r6, spree_shipments.state AS t1_r7, spree_shipments.created_at AS t1_r8, spree_shipments.updated_at AS t1_r9, spree_shipments.stock_location_id AS t1_r10, spree_shipments.adjustment_total AS t1_r11, spree_shipments.additional_tax_total AS t1_r12, spree_shipments.promo_total AS t1_r13, spree_shipments.included_tax_total AS t1_r14, spree_shipments.pre_tax_amount AS t1_r15, spree_shipments.taxable_adjustment_total AS t1_r16, spree_shipments.non_taxable_adjustment_total AS t1_r17, spree_shipments.public_metadata AS t1_r18, spree_shipments.private_metadata AS t1_r19, spree_orders.id AS t2_r0, spree_orders.number AS t2_r1, spree_orders.item_total AS t2_r2, spree_orders.total AS t2_r3, spree_orders.state AS t2_r4, spree_orders.adjustment_total AS t2_r5, spree_orders.user_id AS t2_r6, spree_orders.completed_at AS t2_r7, spree_orders.bill_address_id AS t2_r8, spree_orders.ship_address_id AS t2_r9, spree_orders.payment_total AS t2_r10, spree_orders.shipment_state AS t2_r11, spree_orders.payment_state AS t2_r12, spree_orders.email AS t2_r13, spree_orders.special_instructions AS t2_r14, spree_orders.created_at AS t2_r15, spree_orders.updated_at AS t2_r16, spree_orders.currency AS t2_r17, spree_orders.last_ip_address AS t2_r18, spree_orders.created_by_id AS t2_r19, spree_orders.shipment_total AS t2_r20, spree_orders.additional_tax_total AS t2_r21, spree_orders.promo_total AS t2_r22, spree_orders.channel AS t2_r23, spree_orders.included_tax_total AS t2_r24, spree_orders.item_count AS t2_r25, spree_orders.approver_id AS t2_r26, spree_orders.approved_at AS t2_r27, spree_orders.confirmation_delivered AS t2_r28, spree_orders.considered_risky AS t2_r29, spree_orders.token AS t2_r30, spree_orders.canceled_at AS t2_r31, spree_orders.canceler_id AS t2_r32, spree_orders.store_id AS t2_r33, spree_orders.state_lock_version AS t2_r34, spree_orders.taxable_adjustment_total AS t2_r35, spree_orders.non_taxable_adjustment_total AS t2_r36, spree_orders.store_owner_notification_delivered AS t2_r37, spree_orders.public_metadata AS t2_r38, spree_orders.private_metadata AS t2_r39 FROM spree_inventory_units LEFT OUTER JOIN spree_shipments ON spree_shipments.id = spree_inventory_units.shipment_id LEFT OUTER JOIN spree_orders ON spree_orders.id = spree_inventory_units.order_id WHERE spree_shipments.state <> \"$1\" AND spree_inventory_units.variant_id = \"$2\" AND spree_orders.completed_at IS NOT NULL AND spree_inventory_units.state = \"$3\" ORDER BY spree_orders.completed_at ASC",
        "cost": 32.95,
        "rewrite_types": []
    },
    "rewrites": [
        {
            "sql": "SELECT spree_inventory_units.id AS t0_r0, spree_inventory_units.state AS t0_r1, spree_inventory_units.variant_id AS t0_r2, spree_inventory_units.order_id AS t0_r3, spree_inventory_units.shipment_id AS t0_r4, spree_inventory_units.created_at AS t0_r5, spree_inventory_units.updated_at AS t0_r6, spree_inventory_units.pending AS t0_r7, spree_inventory_units.line_item_id AS t0_r8, spree_inventory_units.quantity AS t0_r9, spree_inventory_units.original_return_item_id AS t0_r10, spree_shipments.id AS t1_r0, spree_shipments.tracking AS t1_r1, spree_shipments.number AS t1_r2, spree_shipments.cost AS t1_r3, spree_shipments.shipped_at AS t1_r4, spree_shipments.order_id AS t1_r5, spree_shipments.address_id AS t1_r6, spree_shipments.state AS t1_r7, spree_shipments.created_at AS t1_r8, spree_shipments.updated_at AS t1_r9, spree_shipments.stock_location_id AS t1_r10, spree_shipments.adjustment_total AS t1_r11, spree_shipments.additional_tax_total AS t1_r12, spree_shipments.promo_total AS t1_r13, spree_shipments.included_tax_total AS t1_r14, spree_shipments.pre_tax_amount AS t1_r15, spree_shipments.taxable_adjustment_total AS t1_r16, spree_shipments.non_taxable_adjustment_total AS t1_r17, spree_shipments.public_metadata AS t1_r18, spree_shipments.private_metadata AS t1_r19, spree_orders.id AS t2_r0, spree_orders.number AS t2_r1, spree_orders.item_total AS t2_r2, spree_orders.total AS t2_r3, spree_orders.state AS t2_r4, spree_orders.adjustment_total AS t2_r5, spree_orders.user_id AS t2_r6, spree_orders.completed_at AS t2_r7, spree_orders.bill_address_id AS t2_r8, spree_orders.ship_address_id AS t2_r9, spree_orders.payment_total AS t2_r10, spree_orders.shipment_state AS t2_r11, spree_orders.payment_state AS t2_r12, spree_orders.email AS t2_r13, spree_orders.special_instructions AS t2_r14, spree_orders.created_at AS t2_r15, spree_orders.updated_at AS t2_r16, spree_orders.currency AS t2_r17, spree_orders.last_ip_address AS t2_r18, spree_orders.created_by_id AS t2_r19, spree_orders.shipment_total AS t2_r20, spree_orders.additional_tax_total AS t2_r21, spree_orders.promo_total AS t2_r22, spree_orders.channel AS t2_r23, spree_orders.included_tax_total AS t2_r24, spree_orders.item_count AS t2_r25, spree_orders.approver_id AS t2_r26, spree_orders.approved_at AS t2_r27, spree_orders.confirmation_delivered AS t2_r28, spree_orders.considered_risky AS t2_r29, spree_orders.token AS t2_r30, spree_orders.canceled_at AS t2_r31, spree_orders.canceler_id AS t2_r32, spree_orders.store_id AS t2_r33, spree_orders.state_lock_version AS t2_r34, spree_orders.taxable_adjustment_total AS t2_r35, spree_orders.non_taxable_adjustment_total AS t2_r36, spree_orders.store_owner_notification_delivered AS t2_r37, spree_orders.public_metadata AS t2_r38, spree_orders.private_metadata AS t2_r39 FROM spree_inventory_units LEFT OUTER JOIN spree_shipments ON spree_shipments.id = spree_inventory_units.shipment_id LEFT OUTER JOIN spree_orders ON spree_orders.id = spree_inventory_units.order_id WHERE spree_shipments.state <> \"$1\" AND spree_inventory_units.variant_id = \"$2\" AND spree_orders.completed_at IS NOT NULL AND spree_inventory_units.state = \"$3\" ORDER BY spree_orders.completed_at ASC LIMIT 1",
            "cost": 32.95,
            "rewrite_types": [
                "AddLimitOne"
            ]
        },
        {
            "sql": "SELECT spree_inventory_units.id AS t0_r0, spree_inventory_units.state AS t0_r1, spree_inventory_units.variant_id AS t0_r2, spree_inventory_units.order_id AS t0_r3, spree_inventory_units.shipment_id AS t0_r4, spree_inventory_units.created_at AS t0_r5, spree_inventory_units.updated_at AS t0_r6, spree_inventory_units.pending AS t0_r7, spree_inventory_units.line_item_id AS t0_r8, spree_inventory_units.quantity AS t0_r9, spree_inventory_units.original_return_item_id AS t0_r10, spree_shipments.id AS t1_r0, spree_shipments.tracking AS t1_r1, spree_shipments.number AS t1_r2, spree_shipments.cost AS t1_r3, spree_shipments.shipped_at AS t1_r4, spree_shipments.order_id AS t1_r5, spree_shipments.address_id AS t1_r6, spree_shipments.state AS t1_r7, spree_shipments.created_at AS t1_r8, spree_shipments.updated_at AS t1_r9, spree_shipments.stock_location_id AS t1_r10, spree_shipments.adjustment_total AS t1_r11, spree_shipments.additional_tax_total AS t1_r12, spree_shipments.promo_total AS t1_r13, spree_shipments.included_tax_total AS t1_r14, spree_shipments.pre_tax_amount AS t1_r15, spree_shipments.taxable_adjustment_total AS t1_r16, spree_shipments.non_taxable_adjustment_total AS t1_r17, spree_shipments.public_metadata AS t1_r18, spree_shipments.private_metadata AS t1_r19, spree_orders.id AS t2_r0, spree_orders.number AS t2_r1, spree_orders.item_total AS t2_r2, spree_orders.total AS t2_r3, spree_orders.state AS t2_r4, spree_orders.adjustment_total AS t2_r5, spree_orders.user_id AS t2_r6, spree_orders.completed_at AS t2_r7, spree_orders.bill_address_id AS t2_r8, spree_orders.ship_address_id AS t2_r9, spree_orders.payment_total AS t2_r10, spree_orders.shipment_state AS t2_r11, spree_orders.payment_state AS t2_r12, spree_orders.email AS t2_r13, spree_orders.special_instructions AS t2_r14, spree_orders.created_at AS t2_r15, spree_orders.updated_at AS t2_r16, spree_orders.currency AS t2_r17, spree_orders.last_ip_address AS t2_r18, spree_orders.created_by_id AS t2_r19, spree_orders.shipment_total AS t2_r20, spree_orders.additional_tax_total AS t2_r21, spree_orders.promo_total AS t2_r22, spree_orders.channel AS t2_r23, spree_orders.included_tax_total AS t2_r24, spree_orders.item_count AS t2_r25, spree_orders.approver_id AS t2_r26, spree_orders.approved_at AS t2_r27, spree_orders.confirmation_delivered AS t2_r28, spree_orders.considered_risky AS t2_r29, spree_orders.token AS t2_r30, spree_orders.canceled_at AS t2_r31, spree_orders.canceler_id AS t2_r32, spree_orders.store_id AS t2_r33, spree_orders.state_lock_version AS t2_r34, spree_orders.taxable_adjustment_total AS t2_r35, spree_orders.non_taxable_adjustment_total AS t2_r36, spree_orders.store_owner_notification_delivered AS t2_r37, spree_orders.public_metadata AS t2_r38, spree_orders.private_metadata AS t2_r39 FROM spree_inventory_units INNER JOIN spree_shipments ON spree_shipments.id = spree_inventory_units.shipment_id LEFT OUTER JOIN spree_orders ON spree_orders.id = spree_inventory_units.order_id WHERE spree_shipments.state <> \"$1\" AND spree_inventory_units.variant_id = \"$2\" AND spree_orders.completed_at IS NOT NULL AND spree_inventory_units.state = \"$3\" ORDER BY spree_orders.completed_at ASC",
            "cost": 32.95,
            "rewrite_types": [
                "ReplaceOuterJoin"
            ]
        },
        {
            "sql": "SELECT spree_inventory_units.id AS t0_r0, spree_inventory_units.state AS t0_r1, spree_inventory_units.variant_id AS t0_r2, spree_inventory_units.order_id AS t0_r3, spree_inventory_units.shipment_id AS t0_r4, spree_inventory_units.created_at AS t0_r5, spree_inventory_units.updated_at AS t0_r6, spree_inventory_units.pending AS t0_r7, spree_inventory_units.line_item_id AS t0_r8, spree_inventory_units.quantity AS t0_r9, spree_inventory_units.original_return_item_id AS t0_r10, spree_shipments.id AS t1_r0, spree_shipments.tracking AS t1_r1, spree_shipments.number AS t1_r2, spree_shipments.cost AS t1_r3, spree_shipments.shipped_at AS t1_r4, spree_shipments.order_id AS t1_r5, spree_shipments.address_id AS t1_r6, spree_shipments.state AS t1_r7, spree_shipments.created_at AS t1_r8, spree_shipments.updated_at AS t1_r9, spree_shipments.stock_location_id AS t1_r10, spree_shipments.adjustment_total AS t1_r11, spree_shipments.additional_tax_total AS t1_r12, spree_shipments.promo_total AS t1_r13, spree_shipments.included_tax_total AS t1_r14, spree_shipments.pre_tax_amount AS t1_r15, spree_shipments.taxable_adjustment_total AS t1_r16, spree_shipments.non_taxable_adjustment_total AS t1_r17, spree_shipments.public_metadata AS t1_r18, spree_shipments.private_metadata AS t1_r19, spree_orders.id AS t2_r0, spree_orders.number AS t2_r1, spree_orders.item_total AS t2_r2, spree_orders.total AS t2_r3, spree_orders.state AS t2_r4, spree_orders.adjustment_total AS t2_r5, spree_orders.user_id AS t2_r6, spree_orders.completed_at AS t2_r7, spree_orders.bill_address_id AS t2_r8, spree_orders.ship_address_id AS t2_r9, spree_orders.payment_total AS t2_r10, spree_orders.shipment_state AS t2_r11, spree_orders.payment_state AS t2_r12, spree_orders.email AS t2_r13, spree_orders.special_instructions AS t2_r14, spree_orders.created_at AS t2_r15, spree_orders.updated_at AS t2_r16, spree_orders.currency AS t2_r17, spree_orders.last_ip_address AS t2_r18, spree_orders.created_by_id AS t2_r19, spree_orders.shipment_total AS t2_r20, spree_orders.additional_tax_total AS t2_r21, spree_orders.promo_total AS t2_r22, spree_orders.channel AS t2_r23, spree_orders.included_tax_total AS t2_r24, spree_orders.item_count AS t2_r25, spree_orders.approver_id AS t2_r26, spree_orders.approved_at AS t2_r27, spree_orders.confirmation_delivered AS t2_r28, spree_orders.considered_risky AS t2_r29, spree_orders.token AS t2_r30, spree_orders.canceled_at AS t2_r31, spree_orders.canceler_id AS t2_r32, spree_orders.store_id AS t2_r33, spree_orders.state_lock_version AS t2_r34, spree_orders.taxable_adjustment_total AS t2_r35, spree_orders.non_taxable_adjustment_total AS t2_r36, spree_orders.store_owner_notification_delivered AS t2_r37, spree_orders.public_metadata AS t2_r38, spree_orders.private_metadata AS t2_r39 FROM spree_inventory_units LEFT OUTER JOIN spree_shipments ON spree_shipments.id = spree_inventory_units.shipment_id INNER JOIN spree_orders ON spree_orders.id = spree_inventory_units.order_id WHERE spree_shipments.state <> \"$1\" AND spree_inventory_units.variant_id = \"$2\" AND spree_orders.completed_at IS NOT NULL AND spree_inventory_units.state = \"$3\" ORDER BY spree_orders.completed_at ASC",
            "cost": 32.95,
            "rewrite_types": [
                "ReplaceOuterJoin"
            ]
        },
        {
            "sql": "SELECT spree_inventory_units.id AS t0_r0, spree_inventory_units.state AS t0_r1, spree_inventory_units.variant_id AS t0_r2, spree_inventory_units.order_id AS t0_r3, spree_inventory_units.shipment_id AS t0_r4, spree_inventory_units.created_at AS t0_r5, spree_inventory_units.updated_at AS t0_r6, spree_inventory_units.pending AS t0_r7, spree_inventory_units.line_item_id AS t0_r8, spree_inventory_units.quantity AS t0_r9, spree_inventory_units.original_return_item_id AS t0_r10, spree_shipments.id AS t1_r0, spree_shipments.tracking AS t1_r1, spree_shipments.number AS t1_r2, spree_shipments.cost AS t1_r3, spree_shipments.shipped_at AS t1_r4, spree_shipments.order_id AS t1_r5, spree_shipments.address_id AS t1_r6, spree_shipments.state AS t1_r7, spree_shipments.created_at AS t1_r8, spree_shipments.updated_at AS t1_r9, spree_shipments.stock_location_id AS t1_r10, spree_shipments.adjustment_total AS t1_r11, spree_shipments.additional_tax_total AS t1_r12, spree_shipments.promo_total AS t1_r13, spree_shipments.included_tax_total AS t1_r14, spree_shipments.pre_tax_amount AS t1_r15, spree_shipments.taxable_adjustment_total AS t1_r16, spree_shipments.non_taxable_adjustment_total AS t1_r17, spree_shipments.public_metadata AS t1_r18, spree_shipments.private_metadata AS t1_r19, spree_orders.id AS t2_r0, spree_orders.number AS t2_r1, spree_orders.item_total AS t2_r2, spree_orders.total AS t2_r3, spree_orders.state AS t2_r4, spree_orders.adjustment_total AS t2_r5, spree_orders.user_id AS t2_r6, spree_orders.completed_at AS t2_r7, spree_orders.bill_address_id AS t2_r8, spree_orders.ship_address_id AS t2_r9, spree_orders.payment_total AS t2_r10, spree_orders.shipment_state AS t2_r11, spree_orders.payment_state AS t2_r12, spree_orders.email AS t2_r13, spree_orders.special_instructions AS t2_r14, spree_orders.created_at AS t2_r15, spree_orders.updated_at AS t2_r16, spree_orders.currency AS t2_r17, spree_orders.last_ip_address AS t2_r18, spree_orders.created_by_id AS t2_r19, spree_orders.shipment_total AS t2_r20, spree_orders.additional_tax_total AS t2_r21, spree_orders.promo_total AS t2_r22, spree_orders.channel AS t2_r23, spree_orders.included_tax_total AS t2_r24, spree_orders.item_count AS t2_r25, spree_orders.approver_id AS t2_r26, spree_orders.approved_at AS t2_r27, spree_orders.confirmation_delivered AS t2_r28, spree_orders.considered_risky AS t2_r29, spree_orders.token AS t2_r30, spree_orders.canceled_at AS t2_r31, spree_orders.canceler_id AS t2_r32, spree_orders.store_id AS t2_r33, spree_orders.state_lock_version AS t2_r34, spree_orders.taxable_adjustment_total AS t2_r35, spree_orders.non_taxable_adjustment_total AS t2_r36, spree_orders.store_owner_notification_delivered AS t2_r37, spree_orders.public_metadata AS t2_r38, spree_orders.private_metadata AS t2_r39 FROM spree_inventory_units INNER JOIN spree_shipments ON spree_shipments.id = spree_inventory_units.shipment_id LEFT OUTER JOIN spree_orders ON spree_orders.id = spree_inventory_units.order_id WHERE spree_shipments.state <> \"$1\" AND spree_inventory_units.variant_id = \"$2\" AND spree_orders.completed_at IS NOT NULL AND spree_inventory_units.state = \"$3\" ORDER BY spree_orders.completed_at ASC LIMIT 1",
            "cost": 32.95,
            "rewrite_types": [
                "AddLimitOne",
                "ReplaceOuterJoin"
            ]
        },
        {
            "sql": "SELECT spree_inventory_units.id AS t0_r0, spree_inventory_units.state AS t0_r1, spree_inventory_units.variant_id AS t0_r2, spree_inventory_units.order_id AS t0_r3, spree_inventory_units.shipment_id AS t0_r4, spree_inventory_units.created_at AS t0_r5, spree_inventory_units.updated_at AS t0_r6, spree_inventory_units.pending AS t0_r7, spree_inventory_units.line_item_id AS t0_r8, spree_inventory_units.quantity AS t0_r9, spree_inventory_units.original_return_item_id AS t0_r10, spree_shipments.id AS t1_r0, spree_shipments.tracking AS t1_r1, spree_shipments.number AS t1_r2, spree_shipments.cost AS t1_r3, spree_shipments.shipped_at AS t1_r4, spree_shipments.order_id AS t1_r5, spree_shipments.address_id AS t1_r6, spree_shipments.state AS t1_r7, spree_shipments.created_at AS t1_r8, spree_shipments.updated_at AS t1_r9, spree_shipments.stock_location_id AS t1_r10, spree_shipments.adjustment_total AS t1_r11, spree_shipments.additional_tax_total AS t1_r12, spree_shipments.promo_total AS t1_r13, spree_shipments.included_tax_total AS t1_r14, spree_shipments.pre_tax_amount AS t1_r15, spree_shipments.taxable_adjustment_total AS t1_r16, spree_shipments.non_taxable_adjustment_total AS t1_r17, spree_shipments.public_metadata AS t1_r18, spree_shipments.private_metadata AS t1_r19, spree_orders.id AS t2_r0, spree_orders.number AS t2_r1, spree_orders.item_total AS t2_r2, spree_orders.total AS t2_r3, spree_orders.state AS t2_r4, spree_orders.adjustment_total AS t2_r5, spree_orders.user_id AS t2_r6, spree_orders.completed_at AS t2_r7, spree_orders.bill_address_id AS t2_r8, spree_orders.ship_address_id AS t2_r9, spree_orders.payment_total AS t2_r10, spree_orders.shipment_state AS t2_r11, spree_orders.payment_state AS t2_r12, spree_orders.email AS t2_r13, spree_orders.special_instructions AS t2_r14, spree_orders.created_at AS t2_r15, spree_orders.updated_at AS t2_r16, spree_orders.currency AS t2_r17, spree_orders.last_ip_address AS t2_r18, spree_orders.created_by_id AS t2_r19, spree_orders.shipment_total AS t2_r20, spree_orders.additional_tax_total AS t2_r21, spree_orders.promo_total AS t2_r22, spree_orders.channel AS t2_r23, spree_orders.included_tax_total AS t2_r24, spree_orders.item_count AS t2_r25, spree_orders.approver_id AS t2_r26, spree_orders.approved_at AS t2_r27, spree_orders.confirmation_delivered AS t2_r28, spree_orders.considered_risky AS t2_r29, spree_orders.token AS t2_r30, spree_orders.canceled_at AS t2_r31, spree_orders.canceler_id AS t2_r32, spree_orders.store_id AS t2_r33, spree_orders.state_lock_version AS t2_r34, spree_orders.taxable_adjustment_total AS t2_r35, spree_orders.non_taxable_adjustment_total AS t2_r36, spree_orders.store_owner_notification_delivered AS t2_r37, spree_orders.public_metadata AS t2_r38, spree_orders.private_metadata AS t2_r39 FROM spree_inventory_units LEFT OUTER JOIN spree_shipments ON spree_shipments.id = spree_inventory_units.shipment_id INNER JOIN spree_orders ON spree_orders.id = spree_inventory_units.order_id WHERE spree_shipments.state <> \"$1\" AND spree_inventory_units.variant_id = \"$2\" AND spree_orders.completed_at IS NOT NULL AND spree_inventory_units.state = \"$3\" ORDER BY spree_orders.completed_at ASC LIMIT 1",
            "cost": 32.95,
            "rewrite_types": [
                "AddLimitOne",
                "ReplaceOuterJoin"
            ]
        }
    ]
}